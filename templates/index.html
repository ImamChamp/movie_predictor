<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>КиноПредсказатель</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;family=Montserrat:wght@400;700&amp;display=swap" rel="stylesheet"/>
<style>
    :root {
      --primary-gold: #FFD700; /* Золотой цвет кинопленки */
      --primary-dark: #181818; /* Темный фон кинозала */
      --secondary-dark: #282828;
      --light-gray: #e0e0e0;
      --text-light: #f5f5f5;
      --text-gray: #999999;
      --accent-red: #E53935; /* Красный цвет бархатных кресел */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif; /* Более кинематографичный шрифт */
      background-color: var(--primary-dark);
      color: var(--text-light);
      line-height: 1.6;
      overflow-x: hidden; /* Убираем горизонтальную прокрутку, если вдруг появится */
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px; /* Увеличил отступы */
      position: relative; /* Для абсолютно позиционированных элементов */
    }

    /* Анимированный фон с эффектом движения света */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), transparent 60%, rgba(255, 215, 0, 0.2));
      z-index: -1;
      animation: lightMove 10s infinite alternate;
    }

    @keyframes lightMove {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 100% 50%;
      }
    }

    header {
      text-align: center;
      margin-bottom: 60px; /* Увеличил отступ */
      padding: 30px 0;
      border-bottom: 2px solid var(--primary-gold); /* Более выразительная линия */
    }

    .logo h1 {
      font-size: 3rem; /* Увеличил размер логотипа */
      color: var(--primary-gold);
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Добавил тень */
    }

    .tagline {
      color: var(--text-gray);
      font-size: 1.4rem; /* Немного увеличил */
      font-style: italic; /* Курсивное начертание */
    }

    main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px; /* Увеличил отступ */
    }

    .prediction-form,
    .prediction-result {
      background-color: var(--secondary-dark);
      border-radius: 12px; /* Скругление побольше */
      padding: 30px; /* Увеличил внутренние отступы */
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* Более глубокая тень */
      border: 1px solid rgba(255, 215, 0, 0.1); /* Легкая золотая обводка */
    }

    h2 {
      color: var(--primary-gold);
      margin-bottom: 25px;
      font-size: 1.8rem;
      border-bottom: 2px solid var(--primary-gold);
      padding-bottom: 12px;
    }

    .form-group {
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 700; /* Жирный шрифт для лейблов */
      color: var(--light-gray);
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 14px;
      border-radius: 6px;
      border: 1px solid var(--text-gray);
      background-color: var(--primary-dark);
      color: var(--text-light);
      font-size: 1.1rem;
      transition: border-color 0.3s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--primary-gold);
      box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
    }

    .predict-button {
      background-color: var(--primary-gold);
      color: var(--primary-dark);
      border: none;
      padding: 14px 28px;
      font-size: 1.2rem;
      font-weight: 700;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease, color 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .predict-button:hover {
      background-color: #f0c808;
      color: var(--secondary-dark);
    }

    .result-empty {
      text-align: center;
      color: var(--text-gray);
      padding: 60px 0;
      font-size: 1.1rem;
    }

    .movie-summary {
      margin-bottom: 30px;
      border-bottom: 1px dashed var(--text-gray);
      padding-bottom: 20px;
    }

    .movie-summary h3 {
      font-size: 2rem;
      margin-bottom: 12px;
      color: var(--primary-gold);
    }

    .rating-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 30px 0;
    }

    .rating {
      width: 140px;
      height: 140px;
      background-color: var(--primary-gold);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--primary-dark);
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      box-shadow: 0 6px 12px rgba(255, 215, 0, 0.4);
    }

    .rating-label {
      font-size: 1.3rem;
      color: var(--light-gray);
    }

    .rating-bar-container {
      background-color: var(--secondary-dark);
      height: 24px;
      border-radius: 12px;
      margin-top: 25px;
      overflow: hidden;
      border: 1px solid var(--text-gray);
    }

    .rating-bar {
      height: 100%;
      background-color: var(--primary-gold);
      width: 0%;
      border-radius: 12px;
      transition: width 1s ease-in-out;
    }

    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 80px 0;
    }

    .spinner {
      border: 6px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 6px solid var(--primary-gold);
      width: 60px;
      height: 60px;
      animation: spin 1.2s linear infinite;
      margin-bottom: 25px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    footer {
      text-align: center;
      margin-top: 60px;
      padding: 30px 0;
      color: var(--text-gray);
      border-top: 2px solid var(--primary-gold);
      font-size: 0.9rem;
    }

    /* Улучшенные стили для чекбоксов жанров */
    .genre-checkboxes {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Адаптивная сетка */
      gap: 12px;
      max-height: 250px;
      overflow-y: auto;
      padding-right: 15px;
      margin-top: 10px;
      border: 1px solid var(--secondary-dark); /* Визуальная граница */
      padding: 15px;
      border-radius: 8px;
    }

    .genre-checkbox-item {
      display: flex;
      align-items: center;
    }

    .genre-checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-right: 10px;
      appearance: none;
      background-color: var(--primary-dark);
      border: 1px solid var(--text-gray);
      border-radius: 4px;
      cursor: pointer;
      outline: none;
      transition: background-color 0.2s ease;
    }

    .genre-checkbox-item input[type="checkbox"]:checked {
      background-color: var(--primary-gold);
      border-color: var(--primary-gold);
    }

    .genre-checkbox-item input[type="checkbox"]:checked::before {
      content: '\2713'; /* Символ галочки */
      display: block;
      text-align: center;
      color: var(--primary-dark);
      font-size: 14px;
      line-height: 18px;
    }

    .genre-checkbox-item label {
      display: inline;
      margin-bottom: 0;
      font-weight: normal;
      color: var(--light-gray);
      cursor: pointer;
    }

    .genre-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .genre-tag {
      background-color: var(--primary-gold);
      color: var(--primary-dark);
      border-radius: 20px;
      padding: 6px 16px;
      font-size: 1rem;
      display: inline-block;
      margin-right: 8px;
      margin-bottom: 8px;
      font-weight: 500;
    }

    #genres-error {
      color: var(--accent-red);
      display: none;
      margin-top: 10px;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      main {
        grid-template-columns: 1fr;
      }

      .prediction-form,
      .prediction-result {
        margin-bottom: 30px;
      }

      .genre-checkboxes {
        grid-template-columns: 1fr;
        max-height: none; /* Убираем ограничение высоты на маленьких экранах */
      }
    }

.select2-container--default .select2-selection--single {
  background-color: #181818;
  border: 1px solid #999;
  color: #f5f5f5;
}
.select2-container--default .select2-results > .select2-results__options {
  background-color: #181818;
  color: #f5f5f5;
}
.select2-container--default .select2-results__option--highlighted[aria-selected] {
  background-color: #333333;
  color: #FFD700;
}
.select2-container--default .select2-selection--single .select2-selection__rendered {
  color: #f5f5f5;
}
</style>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<style>
  .select2-results__option img, .select2-selection__rendered img {
    width: 20px;
    height: 14px;
    margin-right: 6px;
    vertical-align: middle;
  }
</style>
</head>
<body>
<div class="container">
<header>
<div class="logo">
<h1><span style="color: var(--accent-red);">Кино</span>Предсказатель</h1>
</div>
<p class="tagline">Ваш личный оракул в мире кинопремьер</p>
</header>
<main>
<div class="prediction-form">
<h2>Узнайте судьбу будущего хита</h2>
<form id="movie-form">
<div class="form-group">
<label for="title">Название фильма <span style="color: var(--accent-red);">*</span></label>
<input id="title" name="title" placeholder="Введите название" required="" type="text"/>
</div>
<div class="form-group">
<label>Жанры <span style="color: var(--accent-red);">*</span></label>
<div class="genre-checkboxes">
<div class="genre-checkbox-item">
<input id="genre-action" name="genres" type="checkbox" value="action"/>
<label for="genre-action">Боевик</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-comedy" name="genres" type="checkbox" value="comedy"/>
<label for="genre-comedy">Комедия</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-drama" name="genres" type="checkbox" value="drama"/>
<label for="genre-drama">Драма</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-horror" name="genres" type="checkbox" value="horror"/>
<label for="genre-horror">Ужасы</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-science_fiction" name="genres" type="checkbox" value="science_fiction"/>
<label for="genre-science_fiction">Фантастика</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-thriller" name="genres" type="checkbox" value="thriller"/>
<label for="genre-thriller">Триллер</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-romance" name="genres" type="checkbox" value="romance"/>
<label for="genre-romance">Мелодрама</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-animation" name="genres" type="checkbox" value="animation"/>
<label for="genre-animation">Мультфильм</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-adventure" name="genres" type="checkbox" value="adventure"/>
<label for="genre-adventure">Приключения</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-fantasy" name="genres" type="checkbox" value="fantasy"/>
<label for="genre-fantasy">Фэнтези</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-family" name="genres" type="checkbox" value="family"/>
<label for="genre-family">Семейный</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-crime" name="genres" type="checkbox" value="crime"/>
<label for="genre-crime">Преступники</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-mystery" name="genres" type="checkbox" value="mystery"/>
<label for="genre-mystery">Мистика</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-history" name="genres" type="checkbox" value="history"/>
<label for="genre-history">Исторический</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-war" name="genres" type="checkbox" value="war"/>
<label for="genre-war">Военный</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-documentary" name="genres" type="checkbox" value="documentary"/>
<label for="genre-documentary">Документальный</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-music" name="genres" type="checkbox" value="music"/>
<label for="genre-music">Музыкальный</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-western" name="genres" type="checkbox" value="western"/>
<label for="genre-western">Вестерн</label>
</div>
<div class="genre-checkbox-item">
<input id="genre-tv_movie" name="genres" type="checkbox" value="tv_movie"/>
<label for="genre-tv_movie">ТВ-Фильм</label>
</div>
</div>
<div id="genres-error" style="color: var(--accent-red); display: none;">Выберите хотя бы один жанр</div>
</div>
<div class="form-group">
<label for="original-language">Оригинальный язык <span style="color: var(--accent-red);">*</span></label>
<select id="original-language" name="original_language" required="">
<option value="">Выберите язык</option>
<option value=" English">Английский</option>
<option value=" Spanish, Castilian">Испанский</option>
<option value=" Norwegian">Норвежский</option>
<option value=" Japanese">Японский</option>
<option value=" Korean">Корейский</option>
<option value=" Russian">Русский</option>
<option value=" Cantonese">Кантонский</option>
<option value=" Ukrainian">Украинский</option>
<option value=" Italian">Итальянский</option>
<option value=" German">Немецкий</option>
<option value=" French">Французский</option>
<option value=" Finnish">Финский</option>
<option value=" Catalan, Valencian">Каталанский</option>
<option value=" Icelandic">Исландский</option>
<option value=" Indonesian">Индонезийский</option>
<option value=" Dutch, Flemish">Голландский</option>
<option value=" Portuguese">Португальский</option>
<option value=" Telugu">Телугу</option>
<option value=" Polish">Польский</option>
<option value=" Danish">Датский</option>
<option value=" Turkish">Турецкий</option>
<option value=" Chinese">Китайский</option>
<option value=" Thai">Тайский</option>
<option value=" Romanian">Румынский</option>
<option value=" Tagalog">Тагальский</option>
<option value=" Macedonian">Македонский</option>
<option value=" Swedish">Шведский</option>
<option value=" Tamil">Тамильский</option>
<option value=" Vietnamese">Вьетнамский</option>
<option value=" Hindi">Хинди</option>
<option value=" Arabic">Арабский</option>
<option value=" Serbian">Сербский</option>
<option value=" Galician">Галисийский</option>
<option value=" Greek">Греческий</option>
<option value=" Hungarian">Венгерский</option>
<option value=" Malayalam">Малаялам</option>
<option value=" Oriya">Ория</option>
<option value=" Persian">Персидский</option>
<option value=" Bengali">Бенгальский</option>
<option value=" Bokmål, Norwegian, Norwegian Bokmål">Норвежский (букмол)</option>
<option value=" Latvian">Латышский</option>
<option value=" Basque">Баскский</option>
<option value=" Malay">Малайский</option>
<option value=" Central Khmer">Кхмерский</option>
<option value=" Irish">Ирландский</option>
<option value=" Czech">Чешский</option>
<option value=" Gujarati">Гуджарати</option>
<option value=" Kannada">Каннада</option>
<option value=" Serbo-Croatian">Сербохорватский</option>
<option value=" Latin">Латынь</option>
<option value=" Dzongkha">Дзонг-кэ</option>
<option value=" No Language">Без языка</option>
<option value=" Slovak">Словацкий</option>
</select>
</div>
<div class="form-group">
<label for="budget-range">Бюджет фильма:</label>
<div class="d-flex align-items-center">
<input class="form-control-range mr-3" id="budget-range" max="300000000" min="0" step="10000" style="flex: 1;" type="range" value="30000000"/>
<div class="input-group" style="width: 200px;">
<div class="input-group-prepend">
<span class="input-group-text">$</span>
</div>
<input class="form-control" id="budget-input" max="300000000" min="1000000" type="number" value="30000000"/>
</div>
</div>
<div class="d-flex justify-content-between mt-1">
</div>
<p class="mt-2" id="budget-category">Категория: Средний бюджет</p>
</div>
<div class="form-group">
<label for="country">Страна производства <span style="color: var(--accent-red);">*</span></label>
<select id="country" name="country" required="">
<option value="">Выберите страну</option>
<option data-image="https://flagcdn.com/w40/au.png" value="AU">Австралия</option>
<option data-image="https://flagcdn.com/w40/us.png" value="US">США</option>
<option data-image="https://flagcdn.com/w40/mx.png" value="MX">Мексика</option>
<option data-image="https://flagcdn.com/w40/gb.png" value="GB">Великобритания</option>
<option data-image="https://flagcdn.com/w40/cl.png" value="CL">Чили</option>
<option data-image="https://flagcdn.com/w40/no.png" value="NO">Норвегия</option>
<option data-image="https://flagcdn.com/w40/es.png" value="ES">Испания</option>
<option data-image="https://flagcdn.com/w40/ar.png" value="AR">Аргентина</option>
<option data-image="https://flagcdn.com/w40/kr.png" value="KR">Южная Корея</option>
<option data-image="https://flagcdn.com/w40/hk.png" value="HK">Гонконг</option>
<option data-image="https://flagcdn.com/w40/ua.png" value="UA">Украина</option>
<option data-image="https://flagcdn.com/w40/it.png" value="IT">Италия</option>
<option data-image="https://flagcdn.com/w40/ru.png" value="RU">Россия</option>
<option data-image="https://flagcdn.com/w40/co.png" value="CO">Колумбия</option>
<option data-image="https://flagcdn.com/w40/de.png" value="DE">Германия</option>
<option data-image="https://flagcdn.com/w40/jp.png" value="JP">Япония</option>
<option data-image="https://flagcdn.com/w40/fr.png" value="FR">Франция</option>
<option data-image="https://flagcdn.com/w40/fi.png" value="FI">Финляндия</option>
<option data-image="https://flagcdn.com/w40/is.png" value="IS">Исландия</option>
<option data-image="https://flagcdn.com/w40/id.png" value="ID">Индонезия</option>
<option data-image="https://flagcdn.com/w40/br.png" value="BR">Бразилия</option>
<option data-image="https://flagcdn.com/w40/be.png" value="BE">Бельгия</option>
<option data-image="https://flagcdn.com/w40/dk.png" value="DK">Дания</option>
<option data-image="https://flagcdn.com/w40/tr.png" value="TR">Турция</option>
<option data-image="https://flagcdn.com/w40/th.png" value="TH">Таиланд</option>
<option data-image="https://flagcdn.com/w40/pl.png" value="PL">Польша</option>
<option data-image="https://flagcdn.com/w40/gt.png" value="GT">Гватемала</option>
<option data-image="https://flagcdn.com/w40/cn.png" value="CN">Китай</option>
<option data-image="https://flagcdn.com/w40/cz.png" value="CZ">Чехия</option>
<option data-image="https://flagcdn.com/w40/ph.png" value="PH">Филиппины</option>
<option data-image="https://flagcdn.com/w40/za.png" value="ZA">Южная Африка</option>
<option data-image="https://flagcdn.com/w40/ca.png" value="CA">Канада</option>
<option data-image="https://flagcdn.com/w40/nl.png" value="NL">Нидерланды</option>
<option data-image="https://flagcdn.com/w40/tw.png" value="TW">Тайвань</option>
<option data-image="https://flagcdn.com/w40/pr.png" value="PR">Пуэрто-Рико</option>
<option data-image="https://flagcdn.com/w40/in.png" value="IN">Индия</option>
<option data-image="https://flagcdn.com/w40/ie.png" value="IE">Ирландия</option>
<option data-image="https://flagcdn.com/w40/sg.png" value="SG">Сингапур</option>
<option data-image="https://flagcdn.com/w40/pe.png" value="PE">Перу</option>
<option data-image="https://flagcdn.com/w40/ch.png" value="CH">Швейцария</option>
<option data-image="https://flagcdn.com/w40/se.png" value="SE">Швеция</option>
<option data-image="https://flagcdn.com/w40/il.png" value="IL">Израиль</option>
<option data-image="https://flagcdn.com/w40/do.png" value="DO">Доминикана</option>
<option data-image="https://flagcdn.com/w40/vn.png" value="VN">Вьетнам</option>
<option data-image="https://flagcdn.com/w40/gr.png" value="GR">Греция</option>
<option value="SU">СССР</option>
<option data-image="https://flagcdn.com/w40/hu.png" value="HU">Венгрия</option>
<option data-image="https://flagcdn.com/w40/bo.png" value="BO">Боливия</option>
<option data-image="https://flagcdn.com/w40/sk.png" value="SK">Словакия</option>
<option data-image="https://flagcdn.com/w40/uy.png" value="UY">Уругвай</option>
<option data-image="https://flagcdn.com/w40/by.png" value="BY">Беларусь</option>
<option data-image="https://flagcdn.com/w40/at.png" value="AT">Австрия</option>
<option data-image="https://flagcdn.com/w40/py.png" value="PY">Парагвай</option>
<option data-image="https://flagcdn.com/w40/my.png" value="MY">Малайзия</option>
<option data-image="https://flagcdn.com/w40/mu.png" value="MU">Маврикий</option>
<option data-image="https://flagcdn.com/w40/lv.png" value="LV">Латвия</option>
<option value="XC">Европа (прочее)</option>
<option data-image="https://flagcdn.com/w40/kh.png" value="KH">Камбоджа</option>
<option data-image="https://flagcdn.com/w40/ir.png" value="IR">Иран</option>
</select>
</div>
<button class="predict-button" type="submit">Запустить предсказание <svg fill="none" height="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="20"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg></button>
</form>
</div>
<div class="prediction-result" id="result-container">
<h2>Результат <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></h2>
<div class="result-empty" id="result-empty">
<p>Заполните форму и нажмите кнопку, чтобы узнать предсказанную оценку фильма.</p>
</div>
<div class="result-content" id="result-content" style="display: none;">
<div class="movie-summary">
<h3 id="result-title">Название фильма</h3>
<p>Жанры: <span id="result-genres"></span></p>
<p>Страна производства: <span id="result-country"></span></p>
</div>
<div class="rating-container">
<div class="rating">
<span id="prediction-value">0.0</span>
</div>
<p class="rating-label">Предсказанный рейтинг</p>
<p class="better-than"> Это лучше чем у <span id="percentage"></span>% фильмов! </p>
</div>
<div class="rating-details">
<div class="rating-bar-container">
<div class="rating-bar" id="rating-bar"></div>
</div>
</div>
</div>
<div class="loading" id="loading" style="display: none;">
<div class="spinner"></div>
<p>Магия кино в процессе... Ожидайте!</p>
</div>
</div>
</main>
<footer>
<p>© 2025 <span style="color: var(--accent-red);">Кино</span>Предсказатель | Дипломный проект с любовью к кино</p>
</footer>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('movie-form');
      const resultEmpty = document.getElementById('result-empty');
      const resultContent = document.getElementById('result-content');
      const loading = document.getElementById('loading');
      const genresError = document.getElementById('genres-error');
      const budgetRange = document.getElementById('budget-range');
      const budgetInput = document.getElementById('budget-input');
      const budgetCategory = document.getElementById('budget-category');

      // Функция для определения категории бюджета
      function getBudgetCategory(budget) {
          if (budget < 10000000) return "Малобюджетный";
          if (budget < 70000000) return "Средний";
          return "Блокбастер";
      }

      // Функция для форматирования бюджета
      function formatBudget(budget) {
          return parseInt(budget).toLocaleString();
      }

      // Обновление при изменении ползунка
      budgetRange.addEventListener('input', function() {
          const budget = parseInt(this.value);
          budgetInput.value = budget;
          budgetCategory.textContent = `Категория: ${getBudgetCategory(budget)} бюджет`;
      });

      // Обновление при изменении ввода
      budgetInput.addEventListener('input', function() {
          let budget = parseInt(this.value) || 1000000;

          // Ограничение значений
          if (budget < 1000000) budget = 1000000;
          if (budget > 300000000) budget = 300000000;

          this.value = budget;
          budgetRange.value = budget;
          budgetCategory.textContent = `Категория: ${getBudgetCategory(budget)} бюджет`;
      });

      // Обработка потери фокуса полем ввода для форматирования
      budgetInput.addEventListener('blur', function() {
          this.value = parseInt(this.value) || 1000000;
      });


      form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Проверяем, выбран ли хотя бы один жанр
        const selectedGenres = document.querySelectorAll('input[name="genres"]:checked');
        if (selectedGenres.length === 0) {
          genresError.style.display = 'block';
          return;
        } else {
          genresError.style.display = 'none';
        }

        resultEmpty.style.display = 'none';
        resultContent.style.display = 'none';
        loading.style.display = 'flex';

        // Собираем данные из формы
        const formData = new FormData(form);

        // Собираем выбранные жанры в массив
        const genres = [];
        selectedGenres.forEach(checkbox => {
          genres.push(checkbox.value);
        });
        const budget = parseInt(budgetInput.value);

        const movieData = {
          title: formData.get('title'),
          genres: genres, // Теперь передаем массив жанров
          original_language: formData.get('original_language'),
          budget: budget,
          country: formData.get('country')
        };

        // Отправка данных на сервер Flask
        fetch('/predict', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(movieData)
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Ошибка сервера');
          }
          return response.json();
        })
        .then(data => {
          loading.style.display = 'none';
          displayResults(data.movie, data.prediction, data.statistic);
          resultContent.style.display = 'block';
        })
        .catch(error => {
          console.error('Ошибка:', error);
          loading.style.display = 'none';

          // В случае ошибки показываем сообщение
          resultEmpty.style.display = 'block';
          resultEmpty.innerHTML = '<p>Произошла ошибка при получении предсказания. Пожалуйста, попробуйте еще раз.</p>';
        });
      });

      function displayResults(movieData, prediction, statistic) {
        document.getElementById('result-title').textContent = movieData.title;

        document.getElementById('percentage').textContent = statistic;

        const genreMapping = {
          'Action': 'Боевик',
          'Comedy': 'Комедия',
          'Drama': 'Драма',
          'Horror': 'Ужасы',
          'Science Fiction': 'Фантастика',
          'Thriller': 'Триллер',
          'Romance': 'Мелодрама',
          'Animation': 'Мультфильм',
          'Adventure': 'Приключения',
          'Fantasy': 'Фэнтези',
          'Family': 'Семейный',
          'Crime': 'Преступники',
          'Mystery': 'Мистика',
          'History': 'Исторический',
          'War': 'Военный',
          'Documentary': 'Документальный',
          'Music': 'Музыкальный',
          'Western': 'Вестерн',
          'TV Movie': 'ТВ-Фильм'
        };

        const countryMapping = {
          'AU': 'Австралия',
          'US': 'США',
          'MX': 'Мексика',
          'GB': 'Великобритания',
          'CL': 'Чили',
          'NO': 'Норвегия',
          'ES': 'Испания',
          'AR': 'Аргентина',
          'KR': 'Южная Корея',
          'HK': 'Гонконг',
          'UA': 'Украина',
          'IT': 'Италия',
          'RU': 'Россия',
          'CO': 'Колумбия',
          'DE': 'Германия',
          'JP': 'Япония',
          'FR': 'Франция',
          'FI': 'Финляндия',
          'IS': 'Исландия',
          'ID': 'Индонезия',
          'BR': 'Бразилия',
          'BE': 'Бельгия',
          'DK': 'Дания',
          'TR': 'Турция',
          'TH': 'Таиланд',
          'PL': 'Польша',
          'GT': 'Гватемала',
          'CN': 'Китай',
          'CZ': 'Чехия',
          'PH': 'Филиппины',
          'ZA': 'Южная Африка',
          'CA': 'Канада',
          'NL': 'Нидерланды',
          'TW': 'Тайвань',
          'PR': 'Пуэрто-Рико',
          'IN': 'Индия',
          'IE': 'Ирландия',
          'SG': 'Сингапур',
          'PE': 'Перу',
          'CH': 'Швейцария',
          'SE': 'Швеция',
          'IL': 'Израиль',
          'DO': 'Доминикана',
          'VN': 'Вьетнам',
          'GR': 'Греция',
          'SU': 'СССР',
          'HU': 'Венгрия',
          'BO': 'Боливия',
          'SK': 'Словакия',
          'UY': 'Уругвай',
          'BY': 'Беларусь',
          'AT': 'Австрия',
          'PY': 'Парагвай',
          'MY': 'Малайзия',
          'MU': 'Маврикий',
          'LV': 'Латвия',
          'XC': 'Европа (прочее)',
          'KH': 'Камбоджа',
          'IR': 'Иран'
        };

        // Отображаем жанры в виде списка или тегов
        const genresContainer = document.getElementById('result-genres');
        genresContainer.innerHTML = ''; // Очищаем предыдущие значения

        // Если genres - массив, обрабатываем его
        if (Array.isArray(movieData.genres)) {
          const genreElements = movieData.genres.map(genre => {
            const displayName = genreMapping[genre] || genre;
            return `<span class="genre-tag">${displayName}</span>`;
          });
          genresContainer.innerHTML = genreElements.join('');
        }
        // Если genres - строка (для обратной совместимости)
        else if (movieData.genre) {
          genresContainer.innerHTML = `<span class="genre-tag">${genreMapping[movieData.genre] || movieData.genre}</span>`;
        }

        document.getElementById('result-country').textContent = countryMapping[movieData.country] || movieData.country;

        const predictionValue = typeof prediction === 'number' ? prediction.toFixed(1) : prediction;
        document.getElementById('prediction-value').textContent = predictionValue;

        const ratingBar = document.getElementById('rating-bar');
        const ratingPercentage = (parseFloat(predictionValue) / 10) * 100;

        setTimeout(() => {
          ratingBar.style.width = `${ratingPercentage}%`;

          if (parseFloat(predictionValue) >= 7.0) {
            ratingBar.style.backgroundColor = '#4CAF50'; /* Зеленый для хороших оценок */
          } else if (parseFloat(predictionValue) >= 5) {
            ratingBar.style.backgroundColor = '#FFC107'; /* Желтый для средних */
          } else {
            ratingBar.style.backgroundColor = '#F44336'; /* Красный для низких */
          }
        }, 100);
      }
    });
  </script>
<script>
$(document).ready(function() {
  $('#country').select2({
    templateResult: function (state) {
      if (!state.id) return state.text;
      const img = $(state.element).data('image');
      if (!img) return state.text;
      return $('<span><img src="' + img + '" class="img-flag" /> ' + state.text + '</span>');
    },
    templateSelection: function (state) {
      if (!state.id) return state.text;
      const img = $(state.element).data('image');
      if (!img) return state.text;
      return $('<span><img src="' + img + '" class="img-flag" /> ' + state.text + '</span>');
    }
  });
});
</script>
</body>
</html>